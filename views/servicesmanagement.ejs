<!--FORM FOR ADMINPORTAL/CONTENTMANAGEMENT/SERVICES-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Services Management</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Serif+Pro:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/carousel.css">
  <link rel="stylesheet" href="/css/carousel-mangement.css">
</head>

<body>

  <h2>Manage Services</h2>

  <form action="/adminportal/contentmanagement/create" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">

  <label>Service Name <span style="color: red;">*</span></label>
  <input type="text" name="serviceName" required>

  <label>Description</label>
  <textarea name="serviceDescription"></textarea>

  <label>Button Text</label>
  <input type="text" name="buttonText">

  <label>Button URL</label>
  <input type="text" name="buttonUrl">

  <!-- New: upload -->

  <!-- Image upload -->
<label for="image">Image <span style="color: red;">*</label>
<input
  id="image"
  type="file"
  name="imageUrl"
  accept="image/png, image/jpeg, image/webp, image/gif"
/>

<!-- Preview + meta -->
<div id="imagePreview" style="display:none; margin-top:8px;">
  <img id="imageThumb" alt="Selected image preview" style="max-width:180px; height:auto; border:1px solid #ccc; padding:2px; border-radius:4px;">
  <div id="imageMeta" style="font-size:0.9em; color:#555; margin-top:4px;"></div>
  <button type="button" id="clearImage" style="margin-top:6px;">Remove selection</button>
</div>

<!-- Optional validation message -->
<p id="imageError" style="display:none; color:#b00020; margin-top:6px;"></p>
  
  <br>
  <button type="submit">Add Service</button>
</form>


    <!-- CREATE A LIST TO SEE THE SERVICES IN MONGO-->
    <hr>

    <table>
      <!-- top row of table -->
      <thead>
        <tr>
          <th>Image</th>
          <th>Title</th>
          <th>Description</th>
          <th>Button</th>
          <th>Actions</th>
        </tr>
      </thead>
    
      <tbody>
            <% services.forEach(service => { %>
              <tr>
                <td> <img src="<%= service.imageUrl %>" width="100"> </td>
                <td> <%= service.serviceName %> </td>
                <td> <%= service.serviceDescription %> </td>
                <td> <a href="<%= service.buttonUrl %>" target="_blank"><%= service.buttonText %></a> </td>
                <td> <a href="/adminportal/services/<%= service._id %>/edit">üñäÔ∏è Edit</a> </td>

                <td>
                  <form action="/adminportal/services/<%= service._id %>/delete" method="POST" style="display:inline;">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>"> 
                    <button type="submit">üóëÔ∏è Delete</button>
                </form>
                </td>

              </tr>
            <% }) %>
      </tbody>

    </table>

    <!-- ASK TERRY WHAT THIS IS -->
    <script src="/js/service-image-preview.js" defer></script>

</body>