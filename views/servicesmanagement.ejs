<!--FORM FOR ADMINPORTAL/CONTENTMANAGEMENT/SERVICES-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Services Management</title>
  <link rel="stylesheet" href="/css/carousel.css">
  <link rel="stylesheet" href="/css/carousel-mangement.css">
</head>

<body>
    <h2>Manage Services</h2>

  <form action="/adminportal/contentmanagement/create" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">

  <label>Service Name <span style="color: red;">*</span></label>
  <input type="text" name="serviceName" required>

  <label>Description</label>
  <textarea name="serviceDescription"></textarea>

  <label>Button Text</label>
  <input type="text" name="buttonText">

  <label>Button URL</label>
  <input type="text" name="buttonUrl">

  <!-- New: upload -->

  <!-- Image upload -->
<label for="image">Image</label>
<input
  id="image"
  type="file"
  name="image"
  accept="image/png, image/jpeg, image/webp, image/gif"
/>

<!-- Preview + meta -->
<div id="imagePreview" style="display:none; margin-top:8px;">
  <img id="imageThumb" alt="Selected image preview" style="max-width:180px; height:auto; border:1px solid #ccc; padding:2px; border-radius:4px;">
  <div id="imageMeta" style="font-size:0.9em; color:#555; margin-top:4px;"></div>
  <button type="button" id="clearImage" style="margin-top:6px;">Remove selection</button>
</div>

<!-- Optional validation message -->
<p id="imageError" style="display:none; color:#b00020; margin-top:6px;"></p>
  
  
  <button type="submit">Add Service</button>
</form>


    <!-- CREATE A LIST TO SEE THE SERVICES IN MONGO-->
    <hr>

     <ul>
        <% services.forEach(service => { %>
            <li>
            <!--<img src="<%= service.imageUrl %>" width="100">-->
            <strong><%= service.serviceName %></strong> - <%= service.serviceDescription %> - <%= service.buttonText %> - <%= service.buttonUrl %>
            <!--
            <a href="/adminportal/services/<%= service._id %>/edit">Edit</a>
            <form action="/adminportal/services/<%= service._id %>/delete" method="POST" style="display:inline;">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>"> 
                <button type="submit">Delete</button>
            </form> -->

            </li>
        <% }) %>
    </ul>

    <script src="/js/service-image-preview.js" defer></script>

</body>